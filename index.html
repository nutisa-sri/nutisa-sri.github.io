<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
<script>
  AFRAME.registerComponent('markerhandler', {
    init: function () {

      this.el.sceneEl.addEventListener('markerFound', () => {
        // redirect to custom URL e.g. google.com
        let scene = document.querySelector('a-scene');

        let model = document.createElement('a-entity');
        //model.setAttribute('particle-system', 'color: #EF0000,#44CC00');
        //model.setAttribute('position', '0 0 -10');

        //scene.appendChild(model);

      })

      this.el.sceneEl.addEventListener('markerLost', () => {
        // redirect to custom URL e.g. google.com
        //let scene = document.querySelector('a-scene');
        //scene.removeChild(scene.lastChild)

      })
    }
  });
</script>
<style>
  @font-face {
  font-family: FCEkaluckRegular;
  src: url(./assets/FCEkaluckRegular.ttf);
}
</style>
<body style="margin : 0px; overflow: hidden;">
  <div style="position: absolute; bottom: 5%; left: 50%; transform: translate(-50%, -50%);">
    <b style="font-size:4vw; font-family: FCEkaluckRegular; color: white;">ส่องกับ QR Code</b>
  </div>
    <a-scene renderer="colorManagement: true;" embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
      <a-marker markerhandler type='barcode' value='21'>
        <a-entity
        position="-1 -0.17 0"
        rotation = "0 45 0"
        scale="15.5 15.5 15.5"
        gltf-model="./assets/NY_Gift3/CowNEWEdition_02_out/CowNEWEdition_02.gltf"
        animation-mixer
        shadow="cast:true; receive:true"
      ></a-entity>
    <a-entity
      position="0 0.75 0"
      rotation = "0 270 0"
      scale="0.07 0.07 0.07"
      gltf-model="./assets/NY_Gift/All_text_green.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
    ></a-entity>
    <a-entity
      position="0 -0.03 0"
      rotation = "0 270 0"
      scale="12.5 12.5 12.5"
      gltf-model="./assets/NY_Gift3/picnicFarbric_out/picnicFarbric.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity
      position="0 0 0"
      rotation = "0 270 0"
      scale="12 12 12"
      gltf-model="./assets/NY_Gift3/picnicBasket_out/picnicBasket.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity
      position="0 0 0"
      rotation = "0 270 0"
      scale="12 12 12"
      gltf-model="./assets/NY_Gift3/apples_out/apples.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity
      position="0 0 0"
      rotation = "0 270 0"
      scale="12 12 12"
      gltf-model="./assets/NY_Gift3/banana_out/banana.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity
      position="0 0 0"
      rotation = "0 270 0"
      scale="12 12 12"
      gltf-model="./assets/NY_Gift3/cupcake_out/cupcake.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity
      position="0 0 0"
      rotation = "0 270 0"
      scale="12 12 12"
      gltf-model="./assets/NY_Gift3/sandwich_out/sandwich.gltf"
      animation-mixer
      shadow="cast:true; receive:true"
  ></a-entity>
  <a-entity light="color: #e3e3e3; type: ambient" data-aframe-default-light="" aframe-injected=""></a-entity>
  <a-entity light="intensity: 0.6; castShadow: true; shadowBias: 0.2" position="-0.5 1 1" data-aframe-default-light="" aframe-injected="" visible=""></a-entity>      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>