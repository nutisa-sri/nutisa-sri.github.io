<!DOCTYPE html>
<html>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
<script>
  AFRAME.registerComponent('markerhandler', {
    init: function () {

      this.el.sceneEl.addEventListener('markerFound', () => {
        // redirect to custom URL e.g. google.com
        let scene = document.querySelector('a-scene');

        let model = document.createElement('a-entity');
        //model.setAttribute('particle-system', 'color: #EF0000,#44CC00');
        //model.setAttribute('position', '0 0 -10');

        //scene.appendChild(model);

      })

      this.el.sceneEl.addEventListener('markerLost', () => {
        // redirect to custom URL e.g. google.com
        //let scene = document.querySelector('a-scene');
        //scene.removeChild(scene.lastChild)

      })
    }
  });
</script>
<style>
  @font-face {
  font-family: FCEkaluckRegular;
  src: url(../assets/FCEkaluckRegular.ttf);
}
</style>
<body style="margin : 0px; overflow: hidden;">
  <div style="position: absolute; bottom: 5%; left: 50%; transform: translate(-50%, -50%);">
    <b style="font-size:4vw; font-family: FCEkaluckRegular; color: white;">ส่องกับ QR Code</b>
  </div>
    <a-scene renderer="colorManagement: true;" embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
      <a-marker markerhandler type='barcode' value='21'>
        <a-entity
          position="-1 0 0"
          rotation = "0 45 0"
          scale="0.15 0.15 0.15"
          gltf-model="https://raw.githubusercontent.com/nutisa-sri/nutisa-sri.github.io/master/assets/NY_Gift/Cow02.gltf"
          animation-mixer
          shadow="cast:true; receive:true"
        ></a-entity>
      <a-entity
        rotation = "0 -90 0"
        position="0 -0.1 0"
        scale="0.115 0.115 0.115"
        gltf-model="https://raw.githubusercontent.com/nutisa-sri/nutisa-sri.github.io/master/assets/NY_Gift/All_element.gltf"
        animation-mixer
      ></a-entity>
      <a-entity
        position="0 0.75 0"
        rotation = "0 270 0"
        scale="0.07 0.07 0.07"
        gltf-model="https://raw.githubusercontent.com/nutisa-sri/nutisa-sri.github.io/master/assets/NY_Gift/All_text.gltf"
        animation-mixer
      ></a-entity>
      <!--<a-entity 
        position="3 3.5 4"
        light="type: directional; color: #FFF; castShadow:  true;  shadowMapHeight:  1024;  shadowMapWidth:  1024;  shadowCameraLeft:  -7;  intensity:  1"
      ></a-entity>-->
      <!--<a-entity
        light="type:  hemisphere; intensity: 0.25"
      ></a-entity>-->
      <!--<a-entity light="type: ambient; color: #FFF"></a-entity>-->
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>