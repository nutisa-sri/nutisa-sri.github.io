<script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
<!-- we import arjs version without NFT but with marker + location based support -->
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
<script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script> 

<script>
  AFRAME.registerComponent('markerhandler', {
    init: function () {

      this.el.sceneEl.addEventListener('markerFound', () => {
        // redirect to custom URL e.g. google.com
        let scene = document.querySelector('a-scene');

        let model = document.createElement('a-entity');
        model.setAttribute('particle-system', 'color: #EF0000,#44CC00');
        model.setAttribute('position', '0 0 -10');

        scene.appendChild(model);

      })

      this.el.sceneEl.addEventListener('markerLost', () => {
        // redirect to custom URL e.g. google.com
        let scene = document.querySelector('a-scene');
        scene.removeChild(scene.lastChild)

      })
    }
  });
</script>

<body style="margin : 0px; overflow: hidden;">
  <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
    <!--<a-marker preset="hiro">
        <a-scene>
          <a-assets>
            <a-asset-item id="human" src="./assets/Character_Field/running/Cha_running.gltf"></a-asset-item>
            <a-asset-item id="other" src="./assets/magnemite/scene.gltf"></a-asset-item>

          </a-assets>
          <a-entity gltf-model="#human" rotation="0 0 0" animation-mixer animation="property: scale; from: 0.01 0.01 0.01; to: 1 1 1; loop: false; dur: 1000"></a-entity>
          <a-entity gltf-model="#other" position="1 1 0" scale = "0.05 0.05 0.05" animation-mixer></a-entity>
        </a-scene>
    </a-marker>-->
    
    <a-marker markerhandler type='barcode' value='21'>
      <a-scene>
        <a-assets>
          <a-asset-item id="human" src="https://raw.githubusercontent.com/nutisa-sri/nutisa-sri.github.io/master/assets/Character_Field/running/Cha_running.gltf"></a-asset-item>
          <a-asset-item id="other" src="https://raw.githubusercontent.com/nutisa-sri/nutisa-sri.github.io/master/assets/magnemite/scene.gltf"></a-asset-item>

        </a-assets>
        <a-entity light="type: ambient; color: #AAA"></a-entity>
        <a-entity gltf-model="#human" rotation="0 0 0" animation-mixer animation="property: scale; from: 0.01 0.01 0.01; to: 2 2 2; loop: false; dur: 1000"></a-entity>
      </a-scene>
    </a-marker>>
    <a-entity camera></a-entity>
    </a-scene>
</body>
</html>